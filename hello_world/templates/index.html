{% extends 'base.html' %}

{% block content %}
<div class="unit-one-ui">
    <div class="banner">
        <h1>INDEX</h1>
    </div>
    <h2>Unit One Table:
        <button id="addNoteButton" class="btn btn-secondary">Add Aircraft Note</button>
    </h2>
    <div class="table-responsive">
        {% include 'unit1table.html' with notes=notes %}
    </div>
</div>
<!-- Modal -->
<div class="modal fade" id="dataModal" tabindex="-1" aria-labelledby="dataModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="dataModalLabel">Add Data</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <input type="text" id="dataInput" class="form-control" placeholder="Enter Data">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-secondary" id="saveDataButton">Save Data</button>
            </div>
        </div>
    </div>
</div>

<!-- Edit Note Modal -->
<div class="modal fade" id="editNoteModal" tabindex="-1" aria-labelledby="editNoteModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editNoteModalLabel">Edit Note</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Edit Form (You need to adjust fields according to your model) -->
                <form id="editNoteForm" method="post">
                    {% csrf_token %}
                    <!-- Add form fields here, e.g., -->
                    <input type="text" class="form-control mb-2" id="editTailNumber" name="tail_number"
                        placeholder="Tail Number">
                    <input type="text" class="form-control mb-2" id="editServiceTime" name="service_time"
                        placeholder="Service Time">
                    <input type="text" class="form-control mb-2" id="editAircraftModel" name="aircraft_model"
                        placeholder="Aircraft Model">
                    <input type="text" class="form-control mb-2" id="editLocation" name="location"
                        placeholder="Location">
                    <input type="text" class="form-control mb-2" id="editEta" name="eta" placeholder="ETA">
                    <input type="text" class="form-control mb-2" id="editEtd" name="etd" placeholder="ETD">
                    <input type="text" class="form-control mb-2" id="editPassengerCount" name="passenger_count"
                        placeholder="Passenger Count">
                    <input type="text" class="form-control mb-2" id="editFuelType" name="fuel_type"
                        placeholder="Fuel Type">
                    <input type="text" class="form-control mb-2" id="editFuelQty" name="fuel_qty"
                        placeholder="Fuel QTY">
                    <input type="text" class="form-control mb-2" id="editFuelFormat" name="fuel_format"
                        placeholder="Fuel Format">
                    <input type="text" class="form-control mb-2" id="editLavStatus" name="lav_status"
                        placeholder="Lav Status">
                    <input type="text" class="form-control mb-2" id="editLavType" name="lav_type"
                        placeholder="Lav Type">
                    <input type="text" class="form-control mb-2" id="editLavGallons" name="lav_gallons"
                        placeholder="Lav Gal.">
                    <input type="text" class="form-control mb-2" id="editWaterServiceStatus" name="water_service_status"
                        placeholder="Water Status">
                    <input type="text" class="form-control mb-2" id="editGpuStatus" name="gpu_status" placeholder="GPU">
                    <input type="text" class="form-control mb-2" id="editTransportationStatus"
                        name="transportation_status" placeholder="Transp.">
                    <input type="text" class="form-control mb-2" id="editPic" name="pic" placeholder="PIC">
                    <input type="text" class="form-control mb-2" id="editCatering" name="catering_status"
                        placeholder="Cat.">
                    <input type="text" class="form-control mb-2" id="editCateringNumber" name="catering_number"
                        placeholder="Cat. #">
                    <input type="text" class="form-control mb-2" id="editVacuumStatus" name="vacuum_status"
                        placeholder="Vacuum">
                    <input type="text" class="form-control mb-2" id="editOilStatus" name="oil_status" placeholder="Oil">
                    <input type="text" class="form-control mb-2" id="editOilType" name="oil_type"
                        placeholder="Oil Type">
                    <input type="text" class="form-control mb-2" id="editOilQty" name="oil_qty" placeholder="Oil QTY">
                    <input type="text" class="form-control mb-2" id="editLadderStatus" name="ladder_status"
                        placeholder="Ladder">
                    <input type="text" class="form-control mb-2" id="editNotes" name="notes" placeholder="Notes">
                    <!-- ... other fields ... -->
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="saveEditButton">Save changes</button>
                <button type="button" class="btn btn-danger" id="deleteButton">Delete</button>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap Bundle with Popper and jQuery -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    crossorigin="anonymous"></script>
<script>
    $(document).ready(function () {
        $("#addDataButton").click(function () {
            $("#dataModal").modal('show');
        });
        $("#saveDataButton").click(function () {
            var data = $("#dataInput").val();
            // AJAX request to send data to Django
            $.ajax({
                url: '/add-data-url/', // URL to Django view
                type: 'POST',
                data: {
                    'data': data,
                    'csrfmiddlewaretoken': '{{ csrf_token }}'
                },
                success: function (response) {
                    // Handle success - maybe close modal and refresh part of the page
                    $("#dataModal").modal('hide');
                }
            });
        });
    });
</script>
<script>
    document.getElementById('addNoteButton').onclick = function () {
        location.href = "{% url 'add_aircraft_note' %}";
    };
</script>
{% endblock %}