{% extends 'base.html' %}

{% block content %}
<div class="unit-one-ui">
    <div class="banner">
        <h1>INDEX</h1>
    </div>
    <h2>Unit One Table:
        <button id="addNoteButton" class="btn btn-secondary">Add Aircraft Note</button>
    </h2>
    <div class="table-responsive">
        {% include 'unit1table.html' with notes=notes %}
    </div>
</div>
<!-- Modal -->
<div class="modal fade" id="dataModal" tabindex="-1" aria-labelledby="dataModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="dataModalLabel">Add Data</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <input type="text" id="dataInput" class="form-control" placeholder="Enter Data">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-secondary" id="saveDataButton">Save Data</button>
        </div>
      </div>
    </div>
  </div>
<!-- Bootstrap Bundle with Popper and jQuery -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    crossorigin="anonymous"></script>
    <script>
        $(document).ready(function(){
            $("#addDataButton").click(function(){
                $("#dataModal").modal('show');
            });
        
            $("#saveDataButton").click(function(){
                var data = $("#dataInput").val();
                // AJAX request to send data to Django
                $.ajax({
                    url: '/add-data-url/', // URL to Django view
                    type: 'POST',
                    data: {
                        'data': data,
                        'csrfmiddlewaretoken': '{{ csrf_token }}'
                    },
                    success: function(response){
                        // Handle success - maybe close modal and refresh part of the page
                        $("#dataModal").modal('hide');
                    }
                });
            });
        });
        </script>
        <script>
            document.getElementById('addNoteButton').onclick = function() {
                location.href = "{% url 'add_aircraft_note' %}";
            };
        </script>
{% endblock %}